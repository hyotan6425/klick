<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <title>FlexiClicker</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <header class="header">
      <span class="title">FlexiClicker v2</span>
    </header>

    <div class="tabs">
      <button class="tab-btn active" data-tab="tab-main">Main 🖱️</button>
      <button class="tab-btn" data-tab="tab-stealth">Stealth 👻</button>
      <button class="tab-btn" data-tab="tab-safety">Safety 🛡️</button>
    </div>

    <main class="main">
      <!-- Main Tab -->
      <div id="tab-main" class="tab-content active">
        <section class="section">
          <div class="mode-label">クリック間隔</div>
          <div class="mode-options">
            <label class="mode-option">
              <input type="radio" name="mode" value="fixed" id="mode-fixed" checked />
              <span>固定</span>
            </label>
            <label class="mode-option">
              <input type="radio" name="mode" value="random" id="mode-random" />
              <span>ランダム</span>
            </label>
          </div>
        </section>

        <section class="section">
          <div class="field" id="fixed-field">
            <label for="fixed-interval">間隔</label>
            <div class="field-input">
              <input type="number" id="fixed-interval" min="0.1" step="0.1" value="1" />
              <span class="suffix">秒</span>
            </div>
          </div>

          <div class="field" id="random-min-field" style="display: none;">
            <label for="random-min">最小間隔</label>
            <div class="field-input">
              <input type="number" id="random-min" min="0.1" step="0.1" value="5" />
              <span class="suffix">秒</span>
            </div>
          </div>

          <div class="field" id="random-max-field" style="display: none;">
            <label for="random-max">最大間隔</label>
            <div class="field-input">
              <input type="number" id="random-max" min="0.1" step="0.1" value="10" />
              <span class="suffix">秒</span>
            </div>
          </div>
        </section>

        <section class="section">
          <div class="mode-label">停止条件</div>
          <div class="mode-options">
            <label class="mode-option">
              <input type="radio" name="stop" value="none" id="stop-none" checked />
              <span>なし</span>
            </label>
            <label class="mode-option">
              <input type="radio" name="stop" value="count" id="stop-count" />
              <span>回数</span>
            </label>
            <label class="mode-option">
              <input type="radio" name="stop" value="time" id="stop-time" />
              <span>時間</span>
            </label>
          </div>
          <div class="field" id="stop-count-field" style="display: none;">
            <label for="stop-count-input">回数</label>
            <div class="field-input">
              <input type="number" id="stop-count-input" min="1" step="1" value="100" />
              <span class="suffix">回</span>
            </div>
          </div>
          <div class="field" id="stop-time-field" style="display: none;">
            <label for="stop-time-input">時間</label>
            <div class="field-input">
              <input type="number" id="stop-time-input" min="0.1" step="0.1" value="30" />
              <span class="suffix">分</span>
            </div>
          </div>
        </section>
      </div>

      <!-- Stealth Tab -->
      <div id="tab-stealth" class="tab-content">
        <section class="section">
          <div class="field">
            <label class="mode-option" style="width: 100%; justify-content: space-between;">
              <span>Anti-Blur (常時アクティブ偽装)</span>
              <input type="checkbox" id="always-active-check" />
            </label>
            <div style="font-size: 10px; color: #9ca3af; margin-top: 4px;">
              ※有効にするにはページのリロードが必要です
            </div>
          </div>

          <div class="field" style="margin-top: 16px;">
            <label class="mode-option" style="width: 100%; justify-content: space-between;">
              <span>マウスジグラー (Mouse Jiggler)</span>
              <input type="checkbox" id="mouse-jiggler-check" />
            </label>
            <div style="font-size: 10px; color: #9ca3af; margin-top: 4px;">
              ※微細なマウス移動イベントを定期的に発生させます
            </div>
          </div>

          <div class="field" style="margin-top: 16px;">
            <label class="mode-option" style="width: 100%; justify-content: space-between;">
              <span>人間らしいスクロール (Human-like Scroll)</span>
              <input type="checkbox" id="auto-scroll-check" />
            </label>
            <div style="font-size: 10px; color: #9ca3af; margin-top: 4px;">
              ※ランダムにページをスクロールさせます
            </div>
          </div>

          <div class="field" style="margin-top: 16px;">
            <label class="mode-label" for="user-agent-select">
              User-Agent 偽装
            </label>
            <div class="field-input">
              <select id="user-agent-select">
                <option value="default">OFF (Default)</option>
                <option value="iphone">iPhone (Mobile Safari)</option>
                <option value="android">Android (Chrome Mobile)</option>
              </select>
            </div>
            <div style="font-size: 10px; color: #9ca3af; margin-top: 4px;">
              ※変更後はページのリロードが必要です
            </div>
          </div>
        </section>
      </div>

      <!-- Safety Tab -->
      <div id="tab-safety" class="tab-content">
        <section class="section">
          <div class="field">
            <label class="mode-option" style="width: 100%; justify-content: space-between;">
              <span>CAPTCHA 検知停止</span>
              <input type="checkbox" id="captcha-alert-check" />
            </label>
            <div style="font-size: 10px; color: #9ca3af; margin-top: 4px;">
              ※検知したら停止します
            </div>
          </div>

          <div class="field" id="captcha-sound-field" style="margin-left: 20px; display: none;">
             <label class="mode-option" style="width: 100%; justify-content: space-between;">
              <span>検知時サウンド</span>
              <input type="checkbox" id="captcha-sound-check" checked />
            </label>
          </div>

          <hr style="border: 0; border-top: 1px solid #334155; margin: 16px 0;">

          <div class="field">
            <label class="mode-label" style="color: #facc15;">緊急停止 (Global Stop)</label>
            <button id="global-stop-btn" class="secondary-button" style="border-color: #facc15; color: #facc15;">
              全タブの動作を停止 (Stop All Tabs)
            </button>
            <div style="font-size: 10px; color: #9ca3af; margin-top: 4px;">
              ※ショートカット: Ctrl + Shift + E
            </div>
          </div>

          <div class="field" style="margin-top: 16px;">
            <label class="mode-label" style="color: #ef4444;">パニック・リセット (PANIC RESET)</label>
            <button id="panic-reset-btn" class="secondary-button" style="background: rgba(239, 68, 68, 0.2); border-color: #ef4444; color: #ef4444; font-weight: bold;">
              全機能停止 ＆ 痕跡消去
            </button>
            <div style="font-size: 10px; color: #9ca3af; margin-top: 4px;">
              ※全設定OFF + 全ページリロード<br>
              ※ショートカット: Alt + Shift + P
            </div>
          </div>
        </section>
      </div>
    </main>

    <div class="footer">
      <p class="validation-message" id="validation-message"></p>

      <button id="start-select-btn" class="primary-button" disabled>
        ターゲットを選択して開始 (Select Target)
      </button>

      <div class="status-section">
        <div id="status-text">ステータス: 待機中</div>
        <div id="link-warn" class="link-warn hidden">
          ターゲットはリンクです。連続クリックでページ遷移が発生し、ブラウザのスロットリングの原因になります。
        </div>
        <button id="cancel-btn" class="secondary-button hidden">キャンセル</button>
        <button id="stop-btn" class="secondary-button hidden">停止 (STOP)</button>
      </div>
    </div>

    <script src="popup.js"></script>
  </body>
</html>
